/* --- Layers & Reset --- */
@layer reset, theme, base, components, utilities;

/* Reset */
@layer reset {
  ,::before,*::after { box-sizing: border-box; }
  html,body,h1,h2,h3,h4,p,ul,ol,figure { margin: 0; padding: 0; }
  img,svg,video { max-width: 100%; height: auto; display: block; }
  body { min-height: 100vh; font-family: system-ui, sans-serif; }
}

/* Theme tokens */
@layer theme {
  :root {
    --space-1:.25rem; --space-2:.5rem; --space-3:1rem; --space-4:1.5rem;
    --radius:12px; --brand:#3498db; --bg:#fefefe; --fg:#222;
  }
  [data-theme="dark"] {
    --bg:#222; --fg:#fefefe; --brand:#8ab4f8;
  }
}

/* Base */
@layer base {
  body{
    background: var(--bg); color: var(--fg);
    padding: var(--space-4); display:grid; justify-content:center;
  }
  a{ color: var(--brand); text-decoration: none; }
  a:hover{ text-decoration: underline; }
}

/* Utilities */
@layer utilities {
  .flow > * + * { margin-block-start: var(--space-3); }
  .rounded { border-radius: var(--radius); }
  .pad { padding: var(--space-3); }
  .container { container-type:inline-size; container-name:demo; }
}

/* Components */
@layer components {
  header.header{
    position: sticky; top:0; background: var(--bg); padding: var(--space-3); border-radius: var(--radius); margin-bottom: var(--space-3); box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  }
  .controls{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem; }
  .cards{ display:grid; grid-template-columns: repeat(auto-fill,minmax(16rem,1fr)); gap: var(--space-3); }
  .card{
    background: var(--bg); border:1px solid #ccc; padding: var(--space-3); border-radius: var(--radius); box-shadow:0 4px 10px rgba(0,0,0,0.05);
    transition: transform .25s ease, box-shadow .25s ease;
  }
  .card:hover{ transform: translateY(-6px); box-shadow:0 10px 20px rgba(0,0,0,0.08); }
  @property --tilt { syntax:"<angle>"; inherits:false; initial-value:0deg; }
  .tile{ --tilt:0deg; transform: rotate(var(--tilt)); transition: transform .4s; }
  .tile:hover{ --tilt:2deg; }
  .form-field{ padding:.5rem; border-radius:8px; border:1px dashed #999; }
  .form-field:has(input:invalid){ border-color:red; }
  .carousel{ display:flex; gap:.75rem; overflow-x:auto; scroll-snap-type:x mandatory; }
  .carousel > *{ min-width:14rem; scroll-snap-align:start; flex:0 0 auto; }
  button{ padding:.5rem 1rem; border:none; border-radius:6px; background:var(--brand); color:white; cursor:pointer; }
  button:hover{ opacity:.9; }
}

/* Responsive */
@media(max-width:600px){
  .cards{ grid-template-columns: 1fr; }
}